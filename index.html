<body>
    <link rel="stylesheet" href="style.css">
    <main>
        <div class="textBox">
            <textarea class="mainTextArea" id="mainTextArea" name="mainTextArea"></textarea>
        </div>
    </main>

    <div class="scrollingButtons">
        <button onclick="addPage()" class="newPage" id="newPage" style="background-color: #EC964A;">New Page</button>

        <script>
            var index = 1
            var currentPageUserIsOn = 0;
            function addPage()
            {
                var anotherPage = document.createElement("button");
                var title = "Page " + index;
                anotherPage.textContent = title;
                anotherPage.id = "Page" + index;
                anotherPage.addEventListener("click", goToPage);
                anotherPage.addEventListener("dblclick", deletePage);
                anotherPage.style.backgroundColor = "#EC964A";
                document.querySelector(".scrollingButtons").append(anotherPage);
                index++;
                function goToPage()
                {
                    if(anotherPage.textContent != "Delete?")
                    {
                        anotherPage.style.backgroundColor = "#4AC3EC";
                        if(currentPageUserIsOn > 0)
                        {
                            try
                            {
                                if(document.getElementById("Page" + currentPageUserIsOn).textContent != "Delete?")
                                    document.getElementById("Page" + currentPageUserIsOn).style.backgroundColor = "#EC964A"
                            } catch(ex)
                            {
                                console.log("Failure")
                            }
                        }
                        console.log("Wants to go to " + anotherPage.id + " from Page" + currentPageUserIsOn);
                        currentPageUserIsOn = Number(anotherPage.id.substring(4));
                    }
                }
                var deleteIndex = 0;
                function deletePage()
                {
                    var oldName = anotherPage.textContent
                    console.log("Wants to delete " + anotherPage.textContent);
                    anotherPage.textContent = "Delete?";
                    anotherPage.style.backgroundColor = "#F34F4F";  
                    deleteIndex++;
                    setTimeout(() =>
                    {
                        anotherPage.textContent = oldName;
                        deleteIndex = 0;
                        anotherPage.style.backgroundColor = "#EC964A"
                    }, 3000)
                    if(deleteIndex > 1)
                    {
                        anotherPage.remove();
                        currentPageUserIsOn += 1
                    }
                }
            }
        </script>
    </div>

    <div class="information">
        <a href="information.html"><button class="infoButton">Information</button></a>
    </div>

    <div class="loginSystem">
        <label>Username: </label>
        <input class="usernameInput" style="background-color: transparent" type="text" id="name" name="name" size="10" maxlength="10"/>
        <br>
        <label>Password: </label>
        <input class="passwordInput" style="background-color: transparent; margin-left: 5px;" type="password" id="password" name="password" size="10" maxlength="10"/>
        <br>
        <label id="curUser">Current User: </label>
        <br>
        <button class="loginButton" onclick="login()">Log In</button>
        <script>
            function login()
            {
                console.log("User attempted to log in with user " + document.getElementById("name").value + " and password " + document.getElementById("password").value)
                document.getElementById("curUser").textContent = "Current User: " + document.getElementById("name").value
            }
        </script>
    </div>

    <div class="rename">
        <input type="text" class="renameName" id="renameName" name="renameName" maxlength="12" style="background-color: transparent; width: 100px">
        <br>
        <button onclick="renamePage()" class="renameButton">Rename Page</button>

        <script>
            function renamePage()
            {
                var txtCntnt = document.getElementById("renameName").value
                if(currentPageUserIsOn > 0 && txtCntnt.length > 0)
                    document.getElementById("Page" + currentPageUserIsOn).textContent = txtCntnt;
            }
        </script>
    </div>
</body>
